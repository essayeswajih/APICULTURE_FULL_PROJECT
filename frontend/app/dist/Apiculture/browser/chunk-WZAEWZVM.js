import{b as P}from"./chunk-DFL4DKBK.js";import"./chunk-K4ACYX5K.js";import{Ab as b,Ac as f,Ba as g,Db as s,Fa as a,Fb as _,Ka as p,Qa as h,Ua as d,_b as x,cb as v,jb as l,kb as o,lb as n,mb as m,nc as I,oc as y,sc as C,ub as c,vb as u}from"./chunk-EPDGJHWN.js";import"./chunk-IMPBB4AK.js";function S(t,e){if(t&1&&(o(0,"div",11)(1,"div",12)(2,"div",13),s(3),n()()()),t&2){let i=u();a(2),b("width",i.uploadProgress+"%"),v("aria-valuenow",i.uploadProgress),a(),_(" ",i.uploadProgress,"% ")}}function U(t,e){if(t&1&&(o(0,"div",14)(1,"p",15),s(2,"Last Uploaded Image:"),n(),m(3,"img",16),n()),t&2){let i=u();a(3),l("src",i.uploadedUrl,g)}}function F(t,e){if(t&1&&(o(0,"div",17),m(1,"img",18),n()),t&2){let i=e.$implicit,r=e.index;a(),l("src",i,g)("alt","Image "+(r+1))}}function w(t,e){t&1&&(o(0,"div",19),s(1," No images uploaded yet. "),n())}var O=class t{constructor(e,i){this.apiService=e;this.cdr=i}uploadProgress=0;uploadedUrl;images=[];selectedFile;ngOnInit(){this.getAllImages()}getAllImages(){this.apiService.getAllImages().subscribe({next:e=>{this.images=e.images,console.log("Images fetched successfully:",e.images),this.cdr.detectChanges()},error:e=>{console.error("Error fetching images:",e)}})}onFileSelected(e){this.selectedFile=e.target.files[0]}uploadImage(){this.selectedFile&&this.apiService.uploadImage(this.selectedFile).subscribe({next:e=>{e.type===f.UploadProgress&&e.total?(this.uploadProgress=Math.round(e.loaded/e.total*100),this.cdr.detectChanges()):e.type===f.Response&&(console.log("Upload complete:",e.body),this.uploadedUrl=e.body?.url,this.getAllImages())},error:e=>{console.error("Upload error:",e)}}),this.uploadProgress=0,this.cdr.detectChanges()}static \u0275fac=function(i){return new(i||t)(p(P),p(x))};static \u0275cmp=h({type:t,selectors:[["app-images"]],decls:17,vars:5,consts:[[1,"container","py-5"],[1,"image-upload-section"],[1,"input-group","mb-3"],["type","file","accept","image/*",1,"form-control","custom-file-input",3,"change"],[1,"btn","btn-upload",3,"click","disabled"],["class","upload-progress",4,"ngIf"],["class","preview-image",4,"ngIf"],[1,"gallery-section"],[1,"gallery-grid"],["class","image-item",4,"ngFor","ngForOf"],["class","text-muted text-center",4,"ngIf"],[1,"upload-progress"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-primary"],[1,"preview-image"],[1,"mb-2"],["alt","Uploaded Image",1,"img-fluid",2,"max-height","250px",3,"src"],[1,"image-item"],["loading","lazy",3,"src","alt"],[1,"text-muted","text-center"]],template:function(i,r){i&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Upload an Image"),n(),o(4,"div",2)(5,"input",3),c("change",function(E){return r.onFileSelected(E)}),n(),o(6,"button",4),c("click",function(){return r.uploadImage()}),s(7,"Upload Image"),n()(),d(8,S,4,4,"div",5)(9,U,4,1,"div",6),n(),m(10,"hr"),o(11,"div",7)(12,"h3"),s(13,"All Uploaded Images"),n(),o(14,"div",8),d(15,F,2,2,"div",9),n(),d(16,w,2,0,"div",10),n()()),i&2&&(a(6),l("disabled",!r.selectedFile),a(2),l("ngIf",r.uploadProgress>0&&r.uploadProgress<100),a(),l("ngIf",r.uploadedUrl),a(6),l("ngForOf",r.images),a(),l("ngIf",r.images.length===0))},dependencies:[C,I,y],styles:[".image-upload-section[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:2rem;border-radius:10px;box-shadow:0 4px 8px #0000001a;margin-bottom:2rem}.image-upload-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;color:#343a40;margin-bottom:1.5rem}.upload-progress[_ngcontent-%COMP%]{margin-top:1rem;font-size:1rem;color:#495057}.preview-image[_ngcontent-%COMP%]{margin-top:1rem;border:2px solid #dee2e6;border-radius:8px;padding:5px;background-color:#fff}.gallery-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;color:#343a40;margin-bottom:1.5rem}.gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1.5rem}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:8px;transition:transform .3s ease;border:1px solid #dee2e6}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 12px #00000026}.btn-upload[_ngcontent-%COMP%]{background-color:#007bff;border:none;padding:.75rem 1.5rem;font-size:1rem;border-radius:5px;transition:background-color .3s ease}.btn-upload[_ngcontent-%COMP%]:hover{background-color:#0056b3}.custom-file-input[_ngcontent-%COMP%]{font-size:1rem}hr[_ngcontent-%COMP%]{border:0;height:2px;background:linear-gradient(to right,transparent,#dee2e6,transparent);margin:2rem 0}@media (max-width: 576px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px}}"]})};export{O as Images};

import './polyfills.server.mjs';
import{a as l,b as g}from"./chunk-WOXY3T7C.mjs";import{Ob as d,Pb as p,Qb as u,d as h,h as t,m as n,p as o}from"./chunk-DPZBBAFC.mjs";var b=(i=>(i.PENDING="pending",i.PROCESSING="processing",i.SHIPPED="shipped",i.DELIVERED="delivered",i))(b||{}),c=class a{constructor(r,e){this.http=r;this.authService=e}apiUrl=l.apiUrl;getAuthHeaders(){let r=this.authService.getToken();if(!r)throw new Error("No authentication token found");return new d({Authorization:`Bearer ${r}`})}handleError(r){let e="An unknown error occurred!";return r.error instanceof ErrorEvent?e=`Error: ${r.error.message}`:e=`Error ${r.status}: ${r.error?.detail||r.message}`,h(()=>new Error(e))}getCategories(){return this.http.get(`${this.apiUrl}/categories`).pipe(t(this.handleError))}addCategory(r){return this.http.post(`${this.apiUrl}/categories`,r,{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}updateCategory(r,e){return this.http.put(`${this.apiUrl}/categories/${r}`,e,{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}deleteCategory(r){return this.http.delete(`${this.apiUrl}/categories/${r}`,{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}getProducts(r,e,s){let i=new p;return r&&(i=i.set("category",r)),e&&(i=i.set("sortBy",e)),s&&(i=i.set("search",s)),this.http.get(`${this.apiUrl}/products`,{params:i}).pipe(t(this.handleError))}getProductById(r){return this.http.get(`${this.apiUrl}/products/${r}`).pipe(t(this.handleError))}addProduct(r){return this.http.post(`${this.apiUrl}/products`,r,{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}updateProduct(r,e){return this.http.put(`${this.apiUrl}/products/${r}`,e,{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}deleteProduct(r){return this.http.delete(`${this.apiUrl}/products/${r}`,{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}getOrders(){return this.http.get(`${this.apiUrl}/orders`,{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}updateOrderStatus(r,e){return this.http.put(`${this.apiUrl}/orders/orderStatus/${r}`,{status:e},{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}updateOrde(r,e){return this.http.put(`${this.apiUrl}/orders/${r}`,{order:e},{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}createOrder(r){return this.http.post(`${this.apiUrl}/orders`,r,{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}deleteOrder(r){return this.http.delete(`${this.apiUrl}/orders/${r}`,{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}getUser(){return this.http.get(`${this.apiUrl}/auth/users/me`,{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}getOrderByCode(r){return this.http.get(`${this.apiUrl}/orders/orderCode/${r}`,{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}subscribeToNewsletter(r){return this.http.post(`${this.apiUrl}/subscribe_to_newsletter`,{email:r},{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}sendContactMessage(r,e,s,i){return this.http.post(`${this.apiUrl}/support-contact`,{name:r,email:e,sujet:s,message:i},{headers:this.getAuthHeaders()}).pipe(t(this.handleError))}static \u0275fac=function(e){return new(e||a)(o(u),o(g))};static \u0275prov=n({token:a,factory:a.\u0275fac,providedIn:"root"})};export{b as a,c as b};
